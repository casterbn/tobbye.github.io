

var materRes = {
    land1: [0xABD66A, .30, 0, 0],
    hill1: [0xB9A85A, .20, 0, 0],
    river1: [0x70B7E3, .10, 0, 0],

};

var colorRes =  {
    tree0: [0x9B6A6B, 0x4ABB7A, 0x4ABB7A],
    tree1: [0x9B6A6B, 0xBB4A7A, 0xBB4A7A],
    tree2: [0x9B6A6B, 0xBB7A4A, 0xBB7A4A],
    tree3: [0x9B6A6B, 0x7A4ABB, 0x7A4ABB],
    tree4: [0x9B6A6B, 0x4A7ABB, 0x4A7ABB],
    tree5: [0x9B6A6B, 0x4ABB7A, 0x4ABB7A],
    tree6: [0x9B6A6B, 0x7ABB4A, 0x7ABB4A],
    tower0: [0x4ABB7A, 0x4ABB7A, 0x4ABB6A, 0x4ABB6A],
    tower1: [0xBB4A7A, 0xBB4A7A, 0xBB4A6A, 0xBB4A6A],
    tower2: [0xBB7A4A, 0xBB7A4A, 0xBB6A4A, 0xBB6A4A],
    tower3: [0x7A4ABB, 0x7A4ABB, 0x6A4ABB, 0x6A4ABB],
    tower4: [0x4A7ABB, 0x4A7ABB, 0x4A6ABB, 0x4A6ABB],
    tower5: [0x4ABB7A, 0x4ABB7A, 0x4ABB6A, 0x4ABB6A],
    tower6: [0x7ABB4A, 0x7ABB4A, 0x6ABB4A, 0x6ABB4A],
};

// modelRes参数
// 基本B1: shape              默认null=0=[0]
// 坐标P3: position x, y, z   默认null=0=[0,0,0]
// 缩放S3: scale x, y, z      默认null=0=[1,1,1]
// 旋转R3: rotate x, y, z     默认null=0=[0,0,0]
// 材质M4: color, opacity, cast, receive 默认null=0=[0x888888,.00,0,0]
var modelRes = {
    land1: [
        [[1], 0, 0, 0, [0xABD66A, .30, 0, 0]],
    ],
    hill1: [
        [[1], 0, 0, 0, [0x7ABB4A, .20, 0, 0]],
    ],
    river1: [
        [[1], 0, 0, 0, [0x70B7E3, .10, 0, 0]],
    ],
    bridge1: [
        [[1], [-1.8,    0, 1.8], [.80, 2.4, .08], 0, [0xA98F78, .10, 1, 1]],
        [[1], [ -.6,    0, 1.8], [.80, 2.4, .08], 0, [0xA98F78, .10, 1, 1]],
        [[1], [  .6,    0, 1.8], [.80, 2.4, .08], 0, [0xA98F78, .10, 1, 1]],
        [[1], [ 1.8,    0, 1.8], [.80, 2.4, .08], 0, [0xA98F78, .10, 1, 1]],
        [[1], [-2.4,  1.2, 2.4], [.16, .16, 1.2], 0, [0xA98F78, .00, 1, 0]],
        [[1], [ 2.4,  1.2, 2.4], [.16, .16, 1.2], 0, [0xA98F78, .00, 1, 0]],
        [[1], [-2.4, -1.2, 2.4], [.16, .16, 1.2], 0, [0xA98F78, .00, 1, 0]],
        [[1], [ 2.4, -1.2, 2.4], [.16, .16, 1.2], 0, [0xA98F78, .00, 1, 0]],
        [[1], [   0,  1.2, 2.7], [4.8, .16, .16], 0, [0xA98F78, .00, 1, 0]],
        [[1], [   0, -1.2, 2.7], [4.8, .16, .16], 0, [0xA98F78, .00, 1, 0]],
    ],
    tree1: [
        [[1], [0, 0, -.5], [ .5, .5, 1.6], 0, [0x9B6A6B, .00, 1, 1]],
        [[1], [0, 0,  .5], [ .8, .8, 1.6], 0, [0xBB4A7A, .25, 1, 0]],
        [[1], [0, 0, 1.5], [ .5, .5,  .5], 0, [0xBB4A6A, .25, 1, 0]],
    ],
    tower1: [
        [[1], [0, 0, -1], [2.8, 2.8,   1], 0, [0xBB4A7A, .00, 1, 1]],
        [[1], [0, 0,-.5], [2.0, 2.0,   3], 0, [0xBB4A7A, .00, 1, 1]],
        [[1], [0, 0, .5], [1.4, 1.4,   2], 0, [0xBB4A6A, .25, 1, 0]], 
        [[1], [0, 0,  1], [1.0, 1.0,   3], 0, [0xBB4A6A, .25, 1, 0]], 
    ],
}

// mapRes参数
// 基本B5: model, mater, color, name, count 默认null=0=[0,0,0,0,1]
// 偏移O3: offset x, y, z     默认null=0=[0,0,0]
// 坐标P3: position x, y, z   默认null=0=[0,0,0]
// 缩放S3: scale x, y, z      默认null=0=[1,1,1]
// 旋转R3: rotate x, y, z     默认null=0=[0,0,0]

var mapRes = {};
var mapSmall = {
    land: [
        [[1], null, [12, 12, 1.0], [36, 36, 1.6]],
        [[1], null, [ 0, 40, 1.0], [12, 12, 1.6]],
        [[1], null, [40,  0, 1.0], [12, 12, 1.6]],
        [[1], null, [20, 40, 1.0], [20, 12, 1.6]],
        [[1], null, [40, 20, 1.0], [12, 20, 1.6]],
        [[1], null, [40, 40, 1.0], [12, 12, 1.6]],
    ],
    hill:[

        [[1], null, [15, 15, 1.5], [18, 18, 2.0]],
        [[1], null, [ 0, 40, 1.5], [ 6,  6, 2.0]],
        [[1], null, [40,  0, 1.5], [ 6,  6, 2.0]],
        [[1], null, [40, 40, 1.5], [ 6,  6, 2.0]],
        [[1], null, [ 0,  0, 1.5], [12, 12, 2.0]],
        [[1], null, [ 0,  0, 1.5], [ 8,  8, 4.0]],
    ],
    river: [
        [[1], null, [20, 20, -2], [56, 56, 6]],
    ],
    bridge:[
        [[1], null, [ 0, 32, 0], null, 1],
        [[1], null, [20, 32, 0], null, 1],
        [[1], null, [40, 32, 0], null, 1],
        [[1], null, [40,  8, 0], null, 1],
        [[1], null, [32,  0, 0], null, 0],
        [[1], null, [32, 20, 0], null, 0],
        [[1], null, [32, 40, 0], null, 0],
        [[1], null, [ 8, 40, 0], null, 0],
    ],
    tree: [
        [[1,0,0,0, 3], [ 0, 2, 0], [ 7,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [ 9,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [11,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [ 7, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [ 9, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [11, 19, 4]],

        [[1,0,0,0, 3], [ 0, 2, 0], [19,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [21,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [23,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [19, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [21, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [23, 19, 4]],

        [[1,0,1,0, 8], [ 0, 2, 0], [-4, 9, 3]],
        [[1,0,1,0, 8], [ 0, 2, 0], [-2, 9, 3]],
        [[1,0,1,0, 8], [ 0, 2, 0], [ 0, 9, 3], [1.5, 1.5, 1.5]],
        [[1,0,1,0, 8], [ 0, 2, 0], [ 2, 9, 3]],
        [[1,0,1,0, 8], [ 0, 2, 0], [ 4, 9, 3]],

        [[1,0,2,0, 8], [ 2, 0, 0], [ 9,-4, 3]],
        [[1,0,2,0, 8], [ 2, 0, 0], [ 9,-2, 3]],
        [[1,0,2,0, 8], [ 2, 0, 0], [ 9, 0, 3], [1.5, 1.5, 1.5]],
        [[1,0,2,0, 8], [ 2, 0, 0], [ 9, 2, 3]],
        [[1,0,2,0, 8], [ 2, 0, 0], [ 9, 4, 3]],
    ],
    tower: [
        [[1,0,0,0, 1], [ 0, 0, 0], [ 40, 40, 4], [1.5, 1.5, 1.5]],
        [[1,0,1,0, 2], [ 0, 6, 0], [ 13, 37, 3]],
        [[1,0,1,0, 2], [ 0, 6, 0], [ 27, 37, 3]],
        [[1,0,1,0, 2], [ 6, 0, 0], [ -3, 27, 3]],
        [[1,0,1,0, 1], [ 0, 0, 0], [  0, 40, 4], [1.5, 1.5, 1.5]],

        [[1,0,2,0, 2], [ 6, 0, 0], [ 37, 13, 3]],
        [[1,0,2,0, 2], [ 6, 0, 0], [ 37, 27, 3]],
        [[1,0,2,0, 2], [ 0, 6, 0], [ 27, -3, 3]],
        [[1,0,2,0, 1], [ 0, 0, 0], [ 40,  0, 4], [1.5, 1.5, 1.5]],


    ],
}


//大地图
var mapLarge = {
//[坐标x, 坐标y, 坐标z, 长, 宽, 高, 颜色, 透明度, 发光, 阴影]
    land: [
        [[1], null, [ 0,  0, 1.0], [60, 60, 1.6]],
        [[1], null, [ 0, 40, 1.0], [12, 12, 1.6]],
        [[1], null, [40,  0, 1.0], [12, 12, 1.6]],
        [[1], null, [20, 40, 1.0], [20, 12, 1.6]],
        [[1], null, [40, 20, 1.0], [12, 20, 1.6]],
        [[1], null, [40, 40, 1.0], [12, 12, 1.6]],

        [[1], null, [  0, -40, 1.0], [12, 12, 1.6]],
        [[1], null, [-40,   0, 1.0], [12, 12, 1.6]],
        [[1], null, [-20, -40, 1.0], [20, 12, 1.6]],
        [[1], null, [-40, -20, 1.0], [12, 20, 1.6]],
        [[1], null, [-40, -40, 1.0], [12, 12, 1.6]],
    ],
    hill:[
        [[1], null, [ 15,  15, 1.5], [18, 18, 2.0]],
        [[1], null, [ 15, -15, 1.5], [18, 18, 2.0]],
        [[1], null, [  0,  40, 1.5], [ 6,  6, 2.0]],
        [[1], null, [ 40,   0, 1.5], [ 6,  6, 2.0]],
        [[1], null, [ 40,  40, 1.5], [ 6,  6, 2.0]],

        [[1], null, [-15, -15, 1.5], [18, 18, 2.0]],
        [[1], null, [-15,  15, 1.5], [18, 18, 2.0]],
        [[1], null, [  0, -40, 1.5], [ 6,  6, 2.0]],
        [[1], null, [-40,   0, 1.5], [ 6,  6, 2.0]],
        [[1], null, [-40, -40, 1.5], [ 6,  6, 2.0]],
    ],
    river: [
        [[1], null, [0, 0, -4], [96, 96, 10]],
    ],
    bridge:[
        [[1], null, [ 0, 32, 0], null, 1],
        [[1], null, [20, 32, 0], null, 1],
        [[1], null, [40, 32, 0], null, 1],
        [[1], null, [40,  8, 0], null, 1],
        [[1], null, [32,  0, 0], null, 0],
        [[1], null, [32, 20, 0], null, 0],
        [[1], null, [32, 40, 0], null, 0],
        [[1], null, [ 8, 40, 0], null, 0],

        [[1], null, [  0, -32, 0], null, 1],
        [[1], null, [-20, -32, 0], null, 1],
        [[1], null, [-40, -32, 0], null, 1],
        [[1], null, [-40,  -8, 0], null, 1],
        [[1], null, [-32,   0, 0], null, 0],
        [[1], null, [-32, -20, 0], null, 0],
        [[1], null, [-32, -40, 0], null, 0],
        [[1], null, [ -8, -40, 0], null, 0],
    ],
    tree: [
        [[1,0,0,0, 3], [ 0, 2, 0], [ 7,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [ 9,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [11,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [ 7, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [ 9, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [11, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [13, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [15, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [17, 19, 4]],
        [[1,0,0,0, 9], [ 0, 2, 0], [19,  7, 4]],
        [[1,0,0,0, 9], [ 0, 2, 0], [21,  7, 4]],
        [[1,0,0,0, 9], [ 0, 2, 0], [23,  7, 4]],

        [[1,0,0,0, 3], [ 0, -2, 0], [ -7,  -7, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [ -9,  -7, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [-11,  -7, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [ -7, -19, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [ -9, -19, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [-11, -19, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [-13, -19, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [-15, -19, 4]],
        [[1,0,0,0, 3], [ 0, -2, 0], [-17, -19, 4]],
        [[1,0,0,0, 9], [ 0, -2, 0], [-19,  -7, 4]],
        [[1,0,0,0, 9], [ 0, -2, 0], [-21,  -7, 4]],
        [[1,0,0,0, 9], [ 0, -2, 0], [-23,  -7, 4]],

        [[0,0,0,0, 9], [ 0, 2, 0], [ -7,  7, 4]],
        [[0,0,0,0, 9], [ 0, 2, 0], [ -9,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [-13,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [-15,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [-17,  7, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [-13, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [-15, 19, 4]],
        [[1,0,0,0, 3], [ 0, 2, 0], [-17, 19, 4]],
        [[0,0,0,0, 9], [ 0, 2, 0], [-21,  7, 4]],
        [[0,0,0,0, 9], [ 0, 2, 0], [-23,  7, 4]],

        [[0,0,0,0, 9], [ 2, 0, 0], [ 7,  -7, 4]],
        [[0,0,0,0, 9], [ 2, 0, 0], [ 7,  -9, 4]],
        [[1,0,0,0, 3], [ 2, 0, 0], [ 7, -13, 4]],
        [[1,0,0,0, 3], [ 2, 0, 0], [ 7, -15, 4]],
        [[1,0,0,0, 3], [ 2, 0, 0], [ 7, -17, 4]],
        [[1,0,0,0, 3], [ 2, 0, 0], [19, -13, 4]],
        [[1,0,0,0, 3], [ 2, 0, 0], [19, -15, 4]],
        [[1,0,0,0, 3], [ 2, 0, 0], [19, -17, 4]],
        [[0,0,0,0, 9], [ 2, 0, 0], [ 7, -21, 4]],
        [[0,0,0,0, 9], [ 2, 0, 0], [ 7, -23, 4]],
        // [[1, 0, 2], [ 0, 4, 0], [ 36, 12, 3]],
        // [[1, 0, 2], [ 0, 4, 0], [ 36, 24, 3]],
        // [[1, 0, 5], [ 0, 4, 0], [ 44, 12, 3]],
        // [[1, 0, 2], [ 4, 0, 0], [ 12, 36, 3]],
        // [[1, 0, 2], [ 4, 0, 0], [ 24, 36, 3]],
        // [[1, 0, 5], [ 4, 0, 0], [ 12, 44, 3]],

        // [[1, 0, 2], [ 0, -4, 0], [ -36, -12, 3]],
        // [[1, 0, 2], [ 0, -4, 0], [ -36, -24, 3]],
        // [[1, 0, 5], [ 0, -4, 0], [ -44, -12, 3]],
        // [[1, 0, 2], [ -4, 0, 0], [ -12, -36, 3]],
        // [[1, 0, 2], [ -4, 0, 0], [ -24, -36, 3]],
        // [[1, 0, 5], [ -4, 0, 0], [ -12, -44, 3]],
    ],

    tower: [
        [[1,0,1,0, 2], [ 0, 8, 0], [ 12, 36, 3]],
        [[1,0,1,0, 2], [ 0, 8, 0], [ 28, 36, 3]],
        [[1,0,1,0, 2], [ 8, 0, 0], [ -4, 28, 3]],
        [[1,0,1,0, 1], [ 0, 0, 0], [  0, 40, 4], [1.5, 1.5, 1.5]],

        [[1,0,2,0, 2], [ 8, 0, 0], [ 36, 12, 3]],
        [[1,0,2,0, 2], [ 8, 0, 0], [ 36, 28, 3]],
        [[1,0,2,0, 2], [ 0, 8, 0], [ 28, -4, 3]],
        [[1,0,2,0, 1], [ 0, 0, 0], [ 40,  0, 4], [1.5, 1.5, 1.5]],
        [[1,0,0,0, 1], [ 0, 0, 0], [ 40, 40, 4], [1.5, 1.5, 1.5]],

        [[1,0,3,0, 2], [-8, 0, 0], [ -36, -12, 3]],
        [[1,0,3,0, 2], [-8, 0, 0], [ -36, -28, 3]],
        [[1,0,3,0, 2], [ 0,-8, 0], [ -28,   4, 3]],
        [[1,0,3,0, 1], [ 0, 0, 0], [ -40,   0, 4], [1.5, 1.5, 1.5]],

        [[1,0,4,0, 2], [ 0, -8, 0], [ -12, -36, 3]],
        [[1,0,4,0, 2], [ 0, -8, 0], [ -28, -36, 3]],
        [[1,0,4,0, 2], [-8,  0, 0], [   4, -28, 3]],
        [[1,0,4,0, 1], [ 0,  0, 0], [   0, -40, 4], [1.5, 1.5, 1.5]],
        [[1,0,0,0, 1], [ 0,  0, 0], [ -40, -40, 4], [1.5, 1.5, 1.5]],
    ],
}






var Util = {
    v3copy: function(v3) {
        return [v3[0], v3[1], v3[2]];
    },
    v3plus: function(v3, v) {
        return [v3[0]+v[0], v3[1]+v[1], v3[2]+v[2]];
    },
    v3rand: function(v3) {
        return [v3[0]*Math.random(), v3[1]*Math.random(), v3[2]*Math.random()];
    },
    v3mult: function(v3, mult) {
        return [v3[0]*mult, v3[1]*mult, v3[2]*mult];
    },
    v3cross: function(v3, v) {
        return [v3[0]*v[0], v3[1]*v[1], v3[2]*v[2]];
    },
    v3tranXY: function(v3) {
        return [v3[1], v3[0], v3[2]];
    },
    v3tranYZ: function(v3) {
        return [v3[0], v3[2], v3[1]];
    },
    v3tranXZ: function(v3) {
        return [v3[2], v3[1], v3[0]];
    },
    v3ignoreX: function(v3) {
        return [0, v3[1], v3[2]];
    },
    v3ignoreY: function(v3) {
        return [v3[0], 0, v3[2]];
    },
    v3ignoreZ: function(v3) {
        return [v3[0], v3[1], 0];
    },
}



